import{b as m,e as p,f as d,g as h,j as t,s as u}from"./index-Dh8t2Kv9.js";function f(){const n=m(),i=p(),c=d(),r=h({onSuccess:async l=>{var o,a;try{const s=await fetch("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_token:l.access_token})}),e=await s.json();if(!s.ok)throw new Error((e==null?void 0:e.error)||"Auth failed");localStorage.setItem("me_jwt",e.token),c(u({...e.user,token:e.token}));const g=((a=(o=i.state)==null?void 0:o.from)==null?void 0:a.pathname)||"/";n(g,{replace:!0})}catch(s){alert(s.message)}},onError:()=>alert("Google sign-in failed"),flow:"implicit",scope:"profile email openid"});return t.jsxs("section",{className:"max-w-md mx-auto",children:[t.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Welcome to Madly Explore"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Sign in to create and join weekend trips."}),t.jsxs("button",{onClick:()=>r(),className:"w-full flex items-center justify-center gap-2 bg-black text-white rounded px-4 py-2 hover:opacity-90",children:[t.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"h-5 w-5"}),"Continue with Google"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Apple ID sign-in can be added later if required."})]})}export{f as default};
